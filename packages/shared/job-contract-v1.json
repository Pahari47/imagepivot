{
  "version": "1.1",
  "comment": "Immutable Job Contract for Redis Queue. Shared between TypeScript API and Python Worker.",
  "schema": {
    "jobId": "string (UUID/CUID)",
    "userId": "string (UUID/CUID)",
    "orgId": "string (UUID/CUID)",
    "mediaType": "IMAGE | AUDIO | VIDEO",
    "featureSlug": "string (slug from Features table)",
    "input": {
      "storage": "R2",
      "bucket": "string",
      "key": "string",
      "sizeBytes": "number (integer)",
      "mimeType": "string"
    },
    "output": "object | null (unknown at enqueue time; will exist when completed)",
    "params": "object (Dynamic based on featureSlug)",
    "metadata": {
      "utmSource": "string | null",
      "utmCampaign": "string | null",
      "priority": "number (0-10)",
      "queuedAt": "ISO8601 String",
      "attempt": "number (integer, starts at 0)",
      "maxAttempts": "number (integer)",
      "idempotencyKey": "string | null"
    }
  }
}

